(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{44825:function(e,a,t){Promise.resolve().then(t.bind(t,35047)),Promise.resolve().then(t.bind(t,49294)),Promise.resolve().then(t.bind(t,86824))},35047:function(e,a,t){"use strict";t.d(a,{default:function(){return M}});var s=t(57437),r=t(96818),n=t(3289),l=t(76848),i=t(2265),c=t(29827),o=t(16593),d=t(21770),u=t(62869),m=t(95186),x=t(32449),h=t(94508);let f=x.fC,g=i.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(x.aV,{ref:a,className:(0,h.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",t),...r})});g.displayName=x.aV.displayName;let p=i.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(x.xz,{ref:a,className:(0,h.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",t),...r})});p.displayName=x.xz.displayName;let j=i.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(x.VY,{ref:a,className:(0,h.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r})});j.displayName=x.VY.displayName;var v=t(66070),y=t(26110);let b=i.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:a,className:(0,h.cn)("w-full caption-bottom text-sm",t),...r})})});b.displayName="Table";let N=i.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("thead",{ref:a,className:(0,h.cn)("[&_tr]:border-b",t),...r})});N.displayName="TableHeader";let w=i.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("tbody",{ref:a,className:(0,h.cn)("[&_tr:last-child]:border-0",t),...r})});w.displayName="TableBody",i.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("tfoot",{ref:a,className:(0,h.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r})}).displayName="TableFooter";let S=i.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("tr",{ref:a,className:(0,h.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r})});S.displayName="TableRow";let C=i.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("th",{ref:a,className:(0,h.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})});C.displayName="TableHead";let k=i.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("td",{ref:a,className:(0,h.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})});k.displayName="TableCell",i.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("caption",{ref:a,className:(0,h.cn)("mt-4 text-sm text-muted-foreground",t),...r})}).displayName="TableCaption";var z=t(6394);let Z=(0,t(90535).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),R=i.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(z.f,{ref:a,className:(0,h.cn)(Z(),t),...r})});R.displayName=z.f.displayName;var T=t(69626),F=t(33356),D=t(43728),P=t(8588),V=t(78671),E=t(89965),q=t(86824);function K(){var e,a,t,c,o,d,x,h,f,g;let[p,j]=(0,i.useState)([]),[v,b]=(0,i.useState)([]),[N,w]=(0,i.useState)(null),[S,C]=(0,i.useState)([]),[k,z]=(0,i.useState)([]),[Z,R]=(0,i.useState)(null),[T,F]=(0,i.useState)(null),[D,q]=(0,i.useState)(null),[K,M]=(0,i.useState)(""),[_,A]=(0,i.useState)(""),[I,U]=(0,i.useState)(!1),[O,L]=(0,i.useState)(null),[$,Q]=(0,i.useState)(!1),[Y,B]=(0,i.useState)(""),[H,W]=(0,i.useState)(""),[G,J]=(0,i.useState)(""),[X,ee]=(0,i.useState)(""),[ea,et]=(0,i.useState)(""),[es,er]=(0,i.useState)(""),[en,el]=(0,i.useState)([]),[ei,ec]=(0,i.useState)(!1),[eo,ed]=(0,i.useState)(""),[eu,em]=(0,i.useState)(""),[ex,eh]=(0,i.useState)(""),[ef,eg]=(0,i.useState)(""),[ep,ej]=(0,i.useState)(""),[ev,ey]=(0,i.useState)("");(0,i.useEffect)(()=>{(async()=>{try{let e=await (0,E.yu)();b(e),e.length&&e[0].categories.length&&(R(e[0].name),F(e[0].categories[0].name))}catch(e){console.error("Error fetching categories:",e)}})()},[]),(0,i.useEffect)(()=>{(async()=>{try{if(_.trim()){let e=await (0,E.kZ)(K,D||void 0);A(""),j(e)}else if(T){let e=await (0,E.if)(T,D||void 0);j(e)}}catch(e){console.error("Error fetching materials:",e)}})()},[T,D,K]);let eb=e=>{L(e),B(e.Name),W(e.Unit),J(e.Type||""),ee(e.Category.Category||""),et(e.Category.Subcategory||""),er(e.Category["Sub subcategory"]||""),el(e.Prices),Q(!0)},eN=()=>{Q(!1),L(null)},ew=()=>{ec(!1)},eS=async()=>{try{let e=new Date;e.setMonth(e.getMonth()),e.setDate(1);let a=e.toISOString().split("T")[0]+" 00:00:00";await (0,E.hM)({Name:eo,Unit:eu,Type:ex,Category:{Category:ef,Subcategory:ep||null,"Sub subcategory":ev||null},Prices:[[a,null]],ID:"",Qty:0,Source:null});let t=await (0,E.if)(ef);j(t)}catch(e){console.error("Error creating material:",e)}ew()},eC=e=>{J(e),ee(""),et(""),er("")},ek=e=>{ee(e),et(""),er("")},ez=e=>{et(e),er("")},eZ=async()=>{if(O){try{if(await (0,E.VR)(O.Number,{Name:Y,Unit:H,Type:G,Category:{Category:X,Subcategory:ea,"Sub subcategory":es},Prices:en}),ef){let e=await (0,E.if)(ef,D||void 0);j(e)}else if(T){let e=await (0,E.if)(T,D||void 0);j(e)}}catch(e){console.error("Error updating material:",e)}eN()}},eR=async()=>{let e=new Date;e.setMonth(e.getMonth()),e.setDate(1);let a=e.toISOString().split("T")[0]+" 00:00:00";try{let e=(await (0,E.aS)()).map(e=>{if(e.Prices.some(e=>{let[t]=e;return t===a}))throw Error("Month ".concat(a," already exists for material ").concat(e.Name));return{...e,Prices:[...e.Prices,[a,null]]}});await Promise.all(e.map(e=>(0,E.VR)(e.Number,{Prices:e.Prices}))),j(e)}catch(e){console.error("Error adding new month to materials:",e)}},eT=v.find(e=>e.name===G),eF=null==eT?void 0:null===(e=eT.categories)||void 0===e?void 0:e.find(e=>e.name===X),eD=null==eF?void 0:null===(a=eF.subcategories)||void 0===a?void 0:a.find(e=>e.name===ea);return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)(u.z,{className:"md:hidden bg-slate-900 mb-4",onClick:()=>U(!I),children:[(0,s.jsx)(r.Z,{className:"h-6 w-6"}),"Categories"]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-[400px_1fr]",children:[(0,s.jsxs)("aside",{className:"space-y-4 bg-slate-900 p-4 rounded-lg text-white md:block ".concat(I?"block":"hidden"),children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Categories"}),v.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)(u.z,{variant:"ghost",className:"w-full justify-start text-white hover:text-white hover:bg-slate-800 ".concat(Z===e.name?"font-bold":""),onClick:()=>{R(e.name),C(a=>a.includes(e.name)?a.filter(a=>a!==e.name):[...a,e.name])},children:[S.includes(e.name)?(0,s.jsx)(n.Z,{className:"mr-2 h-4 w-4"}):(0,s.jsx)(l.Z,{className:"mr-2 h-4 w-4"}),e.name]}),S.includes(e.name)&&(0,s.jsx)("div",{className:"ml-4",children:e.categories.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)(u.z,{variant:"ghost",className:"w-full justify-start pl-6 text-slate-300 hover:text-white hover:bg-slate-800 ".concat(T===e.name?"font-bold":""),onClick:()=>{F(e.name),q(null),z(a=>a.includes(e.name)?a.filter(a=>a!==e.name):[...a,e.name])},children:[k.includes(e.name)?(0,s.jsx)(n.Z,{className:"mr-2 h-4 w-4"}):(0,s.jsx)(l.Z,{className:"mr-2 h-4 w-4"}),e.name]}),k.includes(e.name)&&e.subcategories&&(0,s.jsx)("div",{className:"ml-6",children:e.subcategories.map(e=>(0,s.jsx)(u.z,{variant:"ghost",className:"w-full justify-start pl-8 text-slate-400 hover:text-white hover:bg-slate-800 ".concat(D===e.name?"font-bold":""),onClick:()=>{q(e.name)},children:e.name},e.name))})]},e.name))})]},e.name))]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Cost Catalogue (Admin)"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(m.I,{placeholder:"Search materials...",className:"max-w-sm",value:_,onChange:e=>A(e.target.value),onKeyUp:e=>{"Enter"===e.key&&M(_)}}),(0,s.jsx)(u.z,{onClick:()=>{M(_)},children:"Search"}),(0,s.jsx)(u.z,{variant:"outline",onClick:()=>{A(""),M("")},children:"Clear"}),(0,s.jsx)(u.z,{variant:"outline",onClick:eR,children:"Add New Month to All Materials"}),(0,s.jsx)(u.z,{variant:"outline",onClick:()=>{ed(""),em(""),eh(""),eg(""),ej(""),ey(""),ec(!0)},children:"Add Material"})]}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:p.length>0?p.map(e=>{var a;return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(P.F,{name:e.Name,unit:e.Unit,location:"National",rating:4,price:(null===(a=e.Prices.find(e=>e[1]))||void 0===a?void 0:a[1])||0,onClick:()=>w(e)}),(0,s.jsx)(u.z,{variant:"outline",size:"sm",className:"absolute top-2 right-2",onClick:()=>eb(e),children:"Edit"})]},e.Number)}):(0,s.jsx)("p",{className:"text-gray-500",children:"No materials found"})})]})]}),(0,s.jsx)(y.Vq,{open:!!N,onOpenChange:()=>w(null),children:(0,s.jsx)(y.cZ,{className:"max-w-2xl",children:N&&(0,s.jsxs)("div",{className:"p-4 space-y-4 bg-white rounded-lg",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-center mb-4",children:N.Name}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)("div",{className:"col-span-2 text-center",children:(0,s.jsxs)("p",{className:"text-gray-700 text-lg",children:["Latest Price:"," ",(0,s.jsxs)("span",{className:"text-green-600",children:["$",(null===(c=N.Prices.find(e=>e[1]))||void 0===c?void 0:null===(t=c[1])||void 0===t?void 0:t.toFixed(2))||0]})]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-gray-600",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Category:"})," ",N.Category.Category]})}),N.Category.Subcategory&&(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-gray-600",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Subcategory:"})," ",N.Category.Subcategory]})}),N.Category["Sub subcategory"]&&(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-gray-600",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Sub-Subcategory:"})," ",N.Category["Sub subcategory"]]})}),(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"text-gray-600",children:[(0,s.jsx)("span",{className:"font-semibold",children:"Unit:"})," ",N.Unit]})})]}),(0,s.jsx)(V.a,{itemName:N.Name,prices:N.Prices.map(e=>{let[a,t]=e;return{date:a,price:t}}),onClose:()=>w(null)})]})})}),(0,s.jsx)(y.Vq,{open:$,onOpenChange:eN,children:(0,s.jsxs)(y.cZ,{className:"max-w-xl",children:[(0,s.jsx)(y.fK,{children:(0,s.jsx)(y.$N,{children:"Edit Material"})}),(0,s.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,s.jsx)(m.I,{placeholder:"Material Name",value:Y,onChange:e=>B(e.target.value)}),(0,s.jsx)(m.I,{placeholder:"Unit",value:H,onChange:e=>W(e.target.value)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Type"}),(0,s.jsxs)("select",{className:"w-full border p-2 mt-1",value:G,onChange:e=>eC(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"-- Select Type --"}),v.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.name))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Category"}),(0,s.jsxs)("select",{className:"w-full border p-2 mt-1",value:X,onChange:e=>ek(e.target.value),disabled:!G,children:[(0,s.jsx)("option",{value:"",children:"-- Select Category --"}),(null==eT?void 0:eT.categories)&&eT.categories.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.name))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Subcategory"}),(0,s.jsxs)("select",{className:"w-full border p-2 mt-1",value:ea,onChange:e=>ez(e.target.value),disabled:!X,children:[(0,s.jsx)("option",{value:"",children:"-- Select Subcategory --"}),(null==eF?void 0:eF.subcategories)&&eF.subcategories.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.name))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Sub-Subcategory"}),(0,s.jsxs)("select",{className:"w-full border p-2 mt-1",value:es,onChange:e=>er(e.target.value),disabled:!ea,children:[(0,s.jsx)("option",{value:"",children:"-- Select Sub-Subcategory --"}),(null==eD?void 0:eD.sub_subcategories)&&eD.sub_subcategories.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"max-h-64 overflow-y-auto",children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Prices"}),en.map((e,a)=>{var t;return(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,s.jsx)(m.I,{type:"text",value:e[0],readOnly:!0,className:"w-1/2"}),(0,s.jsx)(m.I,{type:"number",value:null!==(t=e[1])&&void 0!==t?t:"",onChange:e=>{let t=[...en];t[a][1]=e.target.value?parseFloat(e.target.value):null,el(t)},className:"w-1/2"})]},a)})]})]}),(0,s.jsxs)(y.cN,{children:[(0,s.jsx)(u.z,{variant:"outline",onClick:eN,children:"Cancel"}),(0,s.jsx)(u.z,{onClick:eZ,children:"Save"})]})]})}),(0,s.jsx)(y.Vq,{open:ei,onOpenChange:ew,children:(0,s.jsxs)(y.cZ,{className:"max-w-xl",children:[(0,s.jsx)(y.fK,{children:(0,s.jsx)(y.$N,{children:"Add New Material"})}),(0,s.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,s.jsx)(m.I,{placeholder:"Material Name",value:eo,onChange:e=>ed(e.target.value)}),(0,s.jsx)(m.I,{placeholder:"Unit",value:eu,onChange:e=>em(e.target.value)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Type"}),(0,s.jsxs)("select",{className:"w-full border p-2 mt-1",value:ex,onChange:e=>eh(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"-- Select Type --"}),v.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.name))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Category"}),ex?(0,s.jsxs)("select",{className:"w-full border p-2 mt-1",value:ef,onChange:e=>eg(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"-- Select Category --"}),null===(o=v.find(e=>e.name===ex))||void 0===o?void 0:o.categories.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.name))]}):(0,s.jsx)("select",{className:"w-full border p-2 mt-1",disabled:!0,children:(0,s.jsx)("option",{children:"-- Select Type First --"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Subcategory"}),ef?(0,s.jsxs)("select",{className:"w-full border p-2 mt-1",value:ep,onChange:e=>ej(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"-- Select Subcategory --"}),null===(x=v.find(e=>e.name===ex))||void 0===x?void 0:null===(d=x.categories.find(e=>e.name===ef))||void 0===d?void 0:d.subcategories.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.name))]}):(0,s.jsx)("select",{className:"w-full border p-2 mt-1",disabled:!0,children:(0,s.jsx)("option",{children:"-- Select Category First --"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium",children:"Sub-Subcategory"}),ep?(0,s.jsxs)("select",{className:"w-full border p-2 mt-1",value:ev,onChange:e=>ey(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"-- Select Sub-Subcategory --"}),null===(g=v.find(e=>e.name===ex))||void 0===g?void 0:null===(f=g.categories.find(e=>e.name===ef))||void 0===f?void 0:null===(h=f.subcategories.find(e=>e.name===ep))||void 0===h?void 0:h.sub_subcategories.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}):(0,s.jsx)("select",{className:"w-full border p-2 mt-1",disabled:!0,children:(0,s.jsx)("option",{children:"-- Select Subcategory First --"})})]})]}),(0,s.jsxs)(y.cN,{children:[(0,s.jsx)(u.z,{variant:"outline",onClick:ew,children:"Cancel"}),(0,s.jsx)(u.z,{onClick:eS,children:"Create"})]})]})})]})}var M=function(){let[e,a]=(0,i.useState)(null),[t,r]=(0,i.useState)(null),{user:n,error:l,isLoading:x}=(0,q.aF)();console.log(n);let h=(0,c.NL)(),{data:z=[]}=(0,o.a)({queryKey:["materials"],queryFn:E.aS}),{data:Z=[],isLoading:P,error:V}=(0,o.a)({queryKey:["categories"],queryFn:E.yu});(0,d.D)({mutationFn:E.hM,onSuccess:()=>{h.invalidateQueries({queryKey:["materials"]})}}),(0,d.D)({mutationFn:e=>{let{id:a,material:t}=e;return(0,E.VR)(a,t)},onSuccess:()=>{h.invalidateQueries({queryKey:["materials"]})}}),(0,d.D)({mutationFn:E.Gx,onSuccess:()=>{h.invalidateQueries({queryKey:["materials"]})}});let M=(0,d.D)({mutationFn:E.Z$,onSuccess:()=>{h.invalidateQueries({queryKey:["categories"]})}}),_=(0,d.D)({mutationFn:e=>{let{id:a,category:t}=e;return(0,E.TJ)(a,t)},onSuccess:()=>{h.invalidateQueries({queryKey:["categories"]})}}),A=(0,d.D)({mutationFn:E.FE,onSuccess:()=>{h.invalidateQueries({queryKey:["categories"]})}}),I=e=>{M.mutate(e)},U=(e,a)=>{_.mutate({id:e,category:a})},O=e=>{A.mutate(e)},L=async()=>{window.location.href="/api/auth/logout"};return(0,s.jsxs)("div",{className:"container mx-auto py-10",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),(0,s.jsx)(u.z,{variant:"outline",onClick:L,children:"Logout"})]}),(0,s.jsxs)(f,{defaultValue:"materials",className:"space-y-4",children:[(0,s.jsxs)(g,{children:[(0,s.jsx)(p,{value:"materials",children:"Materials"}),(0,s.jsx)(p,{value:"categories",children:"Categories"})]}),(0,s.jsx)(j,{value:"materials",className:"space-y-4",children:(0,s.jsx)(K,{})}),(0,s.jsx)(j,{value:"categories",className:"space-y-4",children:(0,s.jsxs)(v.Zb,{children:[(0,s.jsx)(v.Ol,{children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v.ll,{children:"Types"}),(0,s.jsx)(v.SZ,{children:"Manage your material types, categories and subcategories."})]}),(0,s.jsxs)(y.Vq,{children:[(0,s.jsx)(y.hg,{asChild:!0,children:(0,s.jsxs)(u.z,{children:[(0,s.jsx)(T.Z,{className:"w-4 h-4 mr-2"}),"Add Type"]})}),(0,s.jsxs)(y.cZ,{children:[(0,s.jsxs)(y.fK,{children:[(0,s.jsx)(y.$N,{children:"Add New Type"}),(0,s.jsx)(y.Be,{children:"Add a new category to organize your materials."})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),I({name:new FormData(e.currentTarget).get("name"),categories:[]})},children:[(0,s.jsx)("div",{className:"grid gap-4 py-4",children:(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(R,{htmlFor:"categoryName",children:"Type Name"}),(0,s.jsx)(m.I,{id:"categoryName",name:"name",placeholder:"Category name"})]})}),(0,s.jsx)(y.cN,{children:(0,s.jsx)(u.z,{type:"submit",children:"Save Type"})})]})]})]})]})}),(0,s.jsx)(v.aY,{children:P?(0,s.jsx)("div",{children:"Loading categories..."}):V?(0,s.jsxs)("div",{children:["Error loading categories: ",V.message]}):(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(b,{children:[(0,s.jsx)(N,{children:(0,s.jsxs)(S,{children:[(0,s.jsx)(C,{children:"Category"}),(0,s.jsx)(C,{children:"Subcategories"}),(0,s.jsx)(C,{className:"text-right",children:"Actions"})]})}),(0,s.jsx)(w,{children:Array.isArray(Z)?Z.map(e=>(0,s.jsxs)(S,{children:[(0,s.jsx)(k,{className:"font-medium",children:e.name}),(0,s.jsx)(k,{children:Array.isArray(e.categories)?e.categories.map(e=>e.name).join(", "):"No subcategories"}),(0,s.jsxs)(k,{className:"text-right space-x-2",children:[(0,s.jsx)(u.z,{variant:"ghost",size:"icon",onClick:()=>r(e),children:(0,s.jsx)(F.Z,{className:"h-4 w-4"})}),(0,s.jsx)(u.z,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>O(e.id),children:(0,s.jsx)(D.Z,{className:"h-4 w-4"})})]})]},e.id)):(0,s.jsx)(S,{children:(0,s.jsx)(k,{colSpan:3,children:"No categories available"})})})]})})})]})})]}),(0,s.jsx)(y.Vq,{open:!!t,onOpenChange:()=>r(null),children:(0,s.jsxs)(y.cZ,{children:[(0,s.jsxs)(y.fK,{children:[(0,s.jsx)(y.$N,{children:"Edit Type"}),(0,s.jsx)(y.Be,{children:"Update the details of your type."})]}),(0,s.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),t){let a=new FormData(e.currentTarget),s={name:a.get("name"),categories:t.categories.map(e=>({...e,name:a.get("subcat-".concat(e.name))}))};U(t.id,s),r(null)}},children:[(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(R,{htmlFor:"edit-category-name",children:"Type Name"}),(0,s.jsx)(m.I,{id:"edit-category-name",name:"name",defaultValue:null==t?void 0:t.name})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(R,{children:"Categories"}),null==t?void 0:t.categories.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.I,{name:"subcat-".concat(e.name),defaultValue:e.name}),(0,s.jsx)(u.z,{type:"button",variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>{t&&r({...t,categories:t.categories.filter((e,t)=>t!==a)})},children:(0,s.jsx)(D.Z,{className:"h-4 w-4"})})]},a)),(0,s.jsxs)(u.z,{type:"button",variant:"outline",className:"mt-2",onClick:()=>{t&&r({...t,categories:[...t.categories,{name:"",sub_subcategories:[]}]})},children:[(0,s.jsx)(T.Z,{className:"w-4 h-4 mr-2"}),"Add Category"]})]})]}),(0,s.jsx)(y.cN,{children:(0,s.jsx)(u.z,{type:"submit",children:"Save Changes"})})]})]})})]})}},89965:function(e,a,t){"use strict";t.d(a,{FE:function(){return h},Gx:function(){return d},TJ:function(){return x},VR:function(){return o},Z$:function(){return m},aS:function(){return l},hM:function(){return c},if:function(){return i},kZ:function(){return n},yu:function(){return u}});var s=t(83464);let r="http://139.59.246.168:8040",n=async(e,a)=>{let t=new URLSearchParams({q:e});return a&&t.append("subcategory",a),(await s.Z.get("".concat(r,"/search"),{params:t})).data},l=async()=>{let e=await s.Z.get("".concat(r,"/materials"));return console.log(e.data),e.data},i=async(e,a,t)=>{let n=new URLSearchParams({category:e});a&&n.append("subcategory",a),t&&n.append("subSubcategory",t);let l=await s.Z.get("".concat(r,"/materials/filter"),{params:n});return console.log(l.data),l.data},c=async e=>(await s.Z.post("".concat(r,"/materials"),e)).data,o=async(e,a)=>(await s.Z.put("".concat(r,"/materials/").concat(e),a)).data,d=async e=>{await s.Z.delete("".concat(r,"/materials/").concat(e))},u=async()=>{let e=await s.Z.get("".concat(r,"/types"));return console.log(e.data),e.data},m=async e=>(await s.Z.post("".concat(r,"/types"),e)).data,x=async(e,a)=>(await s.Z.put("".concat(r,"/types/").concat(e),a)).data,h=async e=>{await s.Z.delete("".concat(r,"/types/").concat(e))}},49294:function(e,a,t){"use strict";t.d(a,{default:function(){return i}});var s=t(57437),r=t(21623),n=t(29827),l=t(2265);function i(e){let{children:a}=e,[t]=(0,l.useState)(()=>new r.S);return(0,s.jsx)(n.aH,{client:t,children:a})}},8588:function(e,a,t){"use strict";t.d(a,{F:function(){return n}});var s=t(57437),r=t(66070);function n(e){let{name:a,unit:t,location:n,rating:l,price:i,onClick:c}=e;return(0,s.jsx)(r.Zb,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:c,children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-medium",children:a}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground mt-1",children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("span",{children:["Unit: ",t]})})})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Price"}),(0,s.jsxs)("div",{className:"font-semibold",children:["Rs. ",Number(i).toFixed(2)]})]})]})})}},78671:function(e,a,t){"use strict";t.d(a,{a:function(){return u}});var s=t(57437),r=t(47625),n=t(58336),l=t(97059),i=t(62994),c=t(8147),o=t(54061),d=t(66070);function u(e){let{itemName:a,prices:t,onClose:u}=e,m=t.filter(e=>null!==e.price);return(0,s.jsxs)(d.Zb,{className:"w-full max-w-2xl",children:[(0,s.jsx)(d.Ol,{className:"relative flex items-center justify-center pb-2",children:(0,s.jsx)("br",{})}),(0,s.jsx)(d.aY,{children:(0,s.jsx)("div",{className:"h-[300px]",children:(0,s.jsx)(r.h,{width:"100%",height:"100%",children:(0,s.jsxs)(n.w,{data:m,children:[(0,s.jsx)(l.K,{dataKey:"date",tickFormatter:e=>new Date(e).toLocaleDateString(),stroke:"#888888",fontSize:12}),(0,s.jsx)(i.B,{stroke:"#888888",fontSize:12,tickFormatter:e=>"Rs. ".concat(e)}),(0,s.jsx)(c.u,{content:e=>{let{active:a,payload:t}=e;return a&&t&&t.length?(0,s.jsx)("div",{className:"rounded-lg border bg-background p-2 shadow-sm",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Date"}),(0,s.jsx)("div",{className:"text-sm font-medium",children:new Date(t[0].payload.date).toLocaleDateString()}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Price"}),(0,s.jsxs)("div",{className:"text-sm font-medium",children:["Rs. ",t[0].value]})]})}):null}}),(0,s.jsx)(o.x,{type:"monotone",dataKey:"price",stroke:"var(--primary)",strokeWidth:2,dot:{fill:"var(--primary)"}})]})})})}),(0,s.jsxs)(d.eW,{className:"relative flex items-center justify-center pb-2",children:[(0,s.jsx)(d.ll,{className:"absolute text-md ",children:"Price History"}),(0,s.jsx)("br",{})]})]})}},62869:function(e,a,t){"use strict";t.d(a,{z:function(){return o}});var s=t(57437),r=t(2265),n=t(37053),l=t(90535),i=t(94508);let c=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,a)=>{let{className:t,variant:r,size:l,asChild:o=!1,...d}=e,u=o?n.g7:"button";return(0,s.jsx)(u,{className:(0,i.cn)(c({variant:r,size:l,className:t})),ref:a,...d})});o.displayName="Button"},66070:function(e,a,t){"use strict";t.d(a,{Ol:function(){return i},SZ:function(){return o},Zb:function(){return l},aY:function(){return d},eW:function(){return u},ll:function(){return c}});var s=t(57437),r=t(2265),n=t(94508);let l=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...r})});l.displayName="Card";let i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});i.displayName="CardHeader";let c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("font-semibold leading-none tracking-tight",t),...r})});c.displayName="CardTitle";let o=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});o.displayName="CardDescription";let d=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",t),...r})});d.displayName="CardContent";let u=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})});u.displayName="CardFooter"},26110:function(e,a,t){"use strict";t.d(a,{$N:function(){return f},Be:function(){return g},Vq:function(){return c},cN:function(){return h},cZ:function(){return m},fK:function(){return x},hg:function(){return o}});var s=t(57437),r=t(2265),n=t(95369),l=t(44986),i=t(94508);let c=n.fC,o=n.xz,d=n.h_;n.x8;let u=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.aV,{ref:a,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});u.displayName=n.aV.displayName;let m=r.forwardRef((e,a)=>{let{className:t,children:r,...c}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(n.VY,{ref:a,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...c,children:[r,(0,s.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.VY.displayName;let x=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};x.displayName="DialogHeader";let h=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};h.displayName="DialogFooter";let f=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.Dx,{ref:a,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});f.displayName=n.Dx.displayName;let g=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.dk,{ref:a,className:(0,i.cn)("text-sm text-muted-foreground",t),...r})});g.displayName=n.dk.displayName},95186:function(e,a,t){"use strict";t.d(a,{I:function(){return l}});var s=t(57437),r=t(2265),n=t(94508);let l=r.forwardRef((e,a)=>{let{className:t,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...l})});l.displayName="Input"},94508:function(e,a,t){"use strict";t.d(a,{cn:function(){return n}});var s=t(61994),r=t(53335);function n(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,r.m6)((0,s.W)(a))}}},function(e){e.O(0,[137,441,936,971,117,744],function(){return e(e.s=44825)}),_N_E=e.O()}]);