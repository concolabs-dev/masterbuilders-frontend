(()=>{var e={};e.id=928,e.ids=[928],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},35377:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>o}),t(92942),t(23711),t(90996);var s=t(30170),l=t(45002),r=t(83876),n=t.n(r),i=t(66299),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);t.d(a,c);let o=["",{children:["test",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,92942)),"/Users/shakir/Desktop/Concolabs/mb-frontend/masterbuilders-frontend/app/test/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,23711)),"/Users/shakir/Desktop/Concolabs/mb-frontend/masterbuilders-frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,90996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/shakir/Desktop/Concolabs/mb-frontend/masterbuilders-frontend/app/test/page.tsx"],m="/test/page",u={require:t,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/test/page",pathname:"/test",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},39998:(e,a,t)=>{Promise.resolve().then(t.bind(t,58073))},78041:(e,a,t)=>{"use strict";t.d(a,{FE:()=>x,Gx:()=>o,TJ:()=>u,VR:()=>c,Z$:()=>m,aS:()=>r,hM:()=>i,if:()=>n,yu:()=>d});var s=t(10863);let l="http://139.59.246.168:8040",r=async()=>{let e=await s.Z.get(`${l}/materials`);return console.log(e.data),e.data},n=async(e,a,t)=>{let r=new URLSearchParams({category:e});a&&r.append("subcategory",a),t&&r.append("subSubcategory",t);let n=await s.Z.get(`${l}/materials/filter`,{params:r});return console.log(n.data),n.data},i=async e=>(await s.Z.post(`${l}/materials`,e)).data,c=async(e,a)=>(await s.Z.put(`${l}/materials/${e}`,a)).data,o=async e=>{await s.Z.delete(`${l}/materials/${e}`)},d=async()=>{let e=await s.Z.get(`${l}/types`);return console.log(e.data),e.data},m=async e=>(await s.Z.post(`${l}/types`,e)).data,u=async(e,a)=>(await s.Z.put(`${l}/types/${e}`,a)).data,x=async e=>{await s.Z.delete(`${l}/types/${e}`)}},58073:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var s=t(97247),l=t(28964),r=t(78041),n=t(28153),i=t(11299),c=t(58053),o=t(70170),d=t(98969),m=t(23664),u=t(20996),x=t(1976);function h(){let[e,a]=(0,l.useState)([]),[t,h]=(0,l.useState)([]),[p,g]=(0,l.useState)(null),[b,j]=(0,l.useState)([]),[v,y]=(0,l.useState)([]),[f,N]=(0,l.useState)(null),[S,C]=(0,l.useState)(null),[w,k]=(0,l.useState)(null),[P,$]=(0,l.useState)(""),[q,_]=(0,l.useState)(""),[Z,M]=(0,l.useState)(!1),[z,U]=(0,l.useState)(null),[E,T]=(0,l.useState)(!1),[I,A]=(0,l.useState)(""),[D,F]=(0,l.useState)(""),[G,O]=(0,l.useState)(""),[V,R]=(0,l.useState)(""),[K,L]=(0,l.useState)(""),[J,Q]=(0,l.useState)(""),[X,B]=(0,l.useState)([]),[H,W]=(0,l.useState)(!1),[Y,ee]=(0,l.useState)(""),[ea,et]=(0,l.useState)(""),[es,el]=(0,l.useState)(""),[er,en]=(0,l.useState)(""),[ei,ec]=(0,l.useState)(""),[eo,ed]=(0,l.useState)(""),em=e=>{U(e),A(e.Name),F(e.Unit),O(e.Type||""),R(e.Category.Category||""),L(e.Category.Subcategory||""),Q(e.Category["Sub subcategory"]||""),B(e.Prices),T(!0)},eu=()=>{T(!1),U(null)},ex=()=>{W(!1)},eh=async()=>{try{let e=new Date;e.setMonth(e.getMonth()),e.setDate(1);let t=e.toISOString().split("T")[0]+" 00:00:00";await (0,r.hM)({Name:Y,Unit:ea,Type:es,Category:{Category:er,Subcategory:ei||null,"Sub subcategory":eo||null},Prices:[[t,null]],ID:"",Qty:0,Source:null});let s=await (0,r.if)(er);a(s)}catch(e){console.error("Error creating material:",e)}ex()},ep=e=>{O(e),R(""),L(""),Q("")},eg=e=>{R(e),L(""),Q("")},eb=e=>{L(e),Q("")},ej=async()=>{if(z){try{if(await (0,r.VR)(z.Number,{Name:I,Unit:D,Type:G,Category:{Category:V,Subcategory:K,"Sub subcategory":J},Prices:X}),S){let e=await (0,r.if)(S,w||void 0);a(e)}}catch(e){console.error("Error updating material:",e)}eu()}},ev=async()=>{let e=new Date;e.setMonth(e.getMonth()),e.setDate(1);let t=e.toISOString().split("T")[0]+" 00:00:00";try{let e=(await (0,r.aS)()).map(e=>{if(e.Prices.some(([e])=>e===t))throw Error(`Month ${t} already exists for material ${e.Name}`);return{...e,Prices:[...e.Prices,[t,null]]}});await Promise.all(e.map(e=>(0,r.VR)(e.Number,{Prices:e.Prices}))),a(e)}catch(e){console.error("Error adding new month to materials:",e)}},ey=t.find(e=>e.name===G),ef=ey?.categories?.find(e=>e.name===V),eN=ef?.subcategories?.find(e=>e.name===K);return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)(c.z,{className:"md:hidden bg-slate-900 mb-4",onClick:()=>M(!Z),children:[s.jsx(m.Z,{className:"h-6 w-6"}),"Categories"]}),(0,s.jsxs)("div",{className:"grid gap-6 md:grid-cols-[400px_1fr]",children:[(0,s.jsxs)("aside",{className:`space-y-4 bg-slate-900 p-4 rounded-lg text-white md:block ${Z?"block":"hidden"}`,children:[s.jsx("h2",{className:"text-lg font-semibold",children:"Categories"}),t.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)(c.z,{variant:"ghost",className:`w-full justify-start text-white hover:text-white hover:bg-slate-800 ${f===e.name?"font-bold":""}`,onClick:()=>{N(e.name),j(a=>a.includes(e.name)?a.filter(a=>a!==e.name):[...a,e.name])},children:[b.includes(e.name)?s.jsx(u.Z,{className:"mr-2 h-4 w-4"}):s.jsx(x.Z,{className:"mr-2 h-4 w-4"}),e.name]}),b.includes(e.name)&&s.jsx("div",{className:"ml-4",children:e.categories.map(e=>(0,s.jsxs)("div",{children:[(0,s.jsxs)(c.z,{variant:"ghost",className:`w-full justify-start pl-6 text-slate-300 hover:text-white hover:bg-slate-800 ${S===e.name?"font-bold":""}`,onClick:()=>{C(e.name),k(null),y(a=>a.includes(e.name)?a.filter(a=>a!==e.name):[...a,e.name])},children:[v.includes(e.name)?s.jsx(u.Z,{className:"mr-2 h-4 w-4"}):s.jsx(x.Z,{className:"mr-2 h-4 w-4"}),e.name]}),v.includes(e.name)&&e.subcategories&&s.jsx("div",{className:"ml-6",children:e.subcategories.map(e=>s.jsx(c.z,{variant:"ghost",className:`w-full justify-start pl-8 text-slate-400 hover:text-white hover:bg-slate-800 ${w===e.name?"font-bold":""}`,onClick:()=>{k(e.name)},children:e.name},e.name))})]},e.name))})]},e.name))]}),(0,s.jsxs)("div",{className:"space-y-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Cost Catalogue (Admin)"}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx(o.I,{placeholder:"Search materials...",className:"max-w-sm",value:q,onChange:e=>_(e.target.value),onKeyUp:e=>{"Enter"===e.key&&$(q)}}),s.jsx(c.z,{onClick:()=>{$(q)},children:"Search"}),s.jsx(c.z,{variant:"outline",onClick:()=>{_(""),$("")},children:"Clear"}),s.jsx(c.z,{variant:"outline",onClick:ev,children:"Add New Month to All Materials"}),s.jsx(c.z,{variant:"outline",onClick:()=>{ee(""),et(""),el(""),en(""),ec(""),ed(""),W(!0)},children:"Add Material"})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.length>0?e.map(e=>(0,s.jsxs)("div",{className:"relative",children:[s.jsx(n.F,{name:e.Name,unit:e.Unit,location:"National",rating:4,price:e.Prices.find(e=>e[1])?.[1]||0,onClick:()=>g(e)}),s.jsx(c.z,{variant:"outline",size:"sm",className:"absolute top-2 right-2",onClick:()=>em(e),children:"Edit"})]},e.Number)):s.jsx("p",{className:"text-gray-500",children:"No materials found"})})]})]}),s.jsx(d.Vq,{open:!!p,onOpenChange:()=>g(null),children:s.jsx(d.cZ,{className:"max-w-2xl",children:p&&(0,s.jsxs)("div",{className:"p-4 space-y-4 bg-white rounded-lg",children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:p.Name}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("div",{className:"col-span-2 text-center",children:(0,s.jsxs)("p",{className:"text-gray-700 text-lg",children:["Latest Price:"," ",(0,s.jsxs)("span",{className:"text-green-600",children:["$",p.Prices.find(e=>e[1])?.[1]?.toFixed(2)||0]})]})}),s.jsx("div",{children:(0,s.jsxs)("p",{className:"text-gray-600",children:[s.jsx("span",{className:"font-semibold",children:"Category:"})," ",p.Category.Category]})}),p.Category.Subcategory&&s.jsx("div",{children:(0,s.jsxs)("p",{className:"text-gray-600",children:[s.jsx("span",{className:"font-semibold",children:"Subcategory:"})," ",p.Category.Subcategory]})}),p.Category["Sub subcategory"]&&s.jsx("div",{children:(0,s.jsxs)("p",{className:"text-gray-600",children:[s.jsx("span",{className:"font-semibold",children:"Sub-Subcategory:"})," ",p.Category["Sub subcategory"]]})}),s.jsx("div",{children:(0,s.jsxs)("p",{className:"text-gray-600",children:[s.jsx("span",{className:"font-semibold",children:"Unit:"})," ",p.Unit]})})]}),s.jsx(i.a,{itemName:p.Name,prices:p.Prices.map(([e,a])=>({date:e,price:a})),onClose:()=>g(null)})]})})}),s.jsx(d.Vq,{open:E,onOpenChange:eu,children:(0,s.jsxs)(d.cZ,{className:"max-w-xl",children:[s.jsx(d.fK,{children:s.jsx(d.$N,{children:"Edit Material"})}),(0,s.jsxs)("div",{className:"space-y-4 mt-4",children:[s.jsx(o.I,{placeholder:"Material Name",value:I,onChange:e=>A(e.target.value)}),s.jsx(o.I,{placeholder:"Unit",value:D,onChange:e=>F(e.target.value)}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Type"}),(0,s.jsxs)("select",{className:"w-full border p-2 mt-1",value:G,onChange:e=>ep(e.target.value),children:[s.jsx("option",{value:"",children:"-- Select Type --"}),t.map(e=>s.jsx("option",{value:e.name,children:e.name},e.name))]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Category"}),(0,s.jsxs)("select",{className:"w-full border p-2 mt-1",value:V,onChange:e=>eg(e.target.value),disabled:!G,children:[s.jsx("option",{value:"",children:"-- Select Category --"}),ey?.categories&&ey?.categories.map(e=>s.jsx("option",{value:e.name,children:e.name},e.name))]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Subcategory"}),(0,s.jsxs)("select",{className:"w-full border p-2 mt-1",value:K,onChange:e=>eb(e.target.value),disabled:!V,children:[s.jsx("option",{value:"",children:"-- Select Subcategory --"}),ef?.subcategories&&ef?.subcategories.map(e=>s.jsx("option",{value:e.name,children:e.name},e.name))]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Sub-Subcategory"}),(0,s.jsxs)("select",{className:"w-full border p-2 mt-1",value:J,onChange:e=>Q(e.target.value),disabled:!K,children:[s.jsx("option",{value:"",children:"-- Select Sub-Subcategory --"}),eN?.sub_subcategories&&eN?.sub_subcategories.map(e=>s.jsx("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"max-h-64 overflow-y-auto",children:[s.jsx("label",{className:"block text-sm font-medium",children:"Prices"}),X.map((e,a)=>(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[s.jsx(o.I,{type:"text",value:e[0],readOnly:!0,className:"w-1/2"}),s.jsx(o.I,{type:"number",value:e[1]??"",onChange:e=>{let t=[...X];t[a][1]=e.target.value?parseFloat(e.target.value):null,B(t)},className:"w-1/2"})]},a))]})]}),(0,s.jsxs)(d.cN,{children:[s.jsx(c.z,{variant:"outline",onClick:eu,children:"Cancel"}),s.jsx(c.z,{onClick:ej,children:"Save"})]})]})}),s.jsx(d.Vq,{open:H,onOpenChange:ex,children:(0,s.jsxs)(d.cZ,{className:"max-w-xl",children:[s.jsx(d.fK,{children:s.jsx(d.$N,{children:"Add New Material"})}),(0,s.jsxs)("div",{className:"space-y-4 mt-4",children:[s.jsx(o.I,{placeholder:"Material Name",value:Y,onChange:e=>ee(e.target.value)}),s.jsx(o.I,{placeholder:"Unit",value:ea,onChange:e=>et(e.target.value)}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Type"}),(0,s.jsxs)("select",{className:"w-full border p-2 mt-1",value:es,onChange:e=>el(e.target.value),children:[s.jsx("option",{value:"",children:"-- Select Type --"}),t.map(e=>s.jsx("option",{value:e.name,children:e.name},e.name))]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Category"}),es?(0,s.jsxs)("select",{className:"w-full border p-2 mt-1",value:er,onChange:e=>en(e.target.value),children:[s.jsx("option",{value:"",children:"-- Select Category --"}),t.find(e=>e.name===es)?.categories.map(e=>s.jsx("option",{value:e.name,children:e.name},e.name))]}):s.jsx("select",{className:"w-full border p-2 mt-1",disabled:!0,children:s.jsx("option",{children:"-- Select Type First --"})})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Subcategory"}),er?(0,s.jsxs)("select",{className:"w-full border p-2 mt-1",value:ei,onChange:e=>ec(e.target.value),children:[s.jsx("option",{value:"",children:"-- Select Subcategory --"}),t.find(e=>e.name===es)?.categories.find(e=>e.name===er)?.subcategories&&t.find(e=>e.name===es)?.categories.find(e=>e.name===er)?.subcategories.map(e=>s.jsx("option",{value:e.name,children:e.name},e.name))]}):s.jsx("select",{className:"w-full border p-2 mt-1",disabled:!0,children:s.jsx("option",{children:"-- Select Category First --"})})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Sub-Subcategory"}),ei?(0,s.jsxs)("select",{className:"w-full border p-2 mt-1",value:eo,onChange:e=>ed(e.target.value),children:[s.jsx("option",{value:"",children:"-- Select Sub-Subcategory --"}),t.find(e=>e.name===es)?.categories.find(e=>e.name===er)?.subcategories.find(e=>e.name===ei)?.sub_subcategories&&t.find(e=>e.name===es)?.categories.find(e=>e.name===er)?.subcategories.find(e=>e.name===ei)?.sub_subcategories.map(e=>s.jsx("option",{value:e,children:e},e))]}):s.jsx("select",{className:"w-full border p-2 mt-1",disabled:!0,children:s.jsx("option",{children:"-- Select Subcategory First --"})})]})]}),(0,s.jsxs)(d.cN,{children:[s.jsx(c.z,{variant:"outline",onClick:ex,children:"Cancel"}),s.jsx(c.z,{onClick:eh,children:"Create"})]})]})})]})}},92942:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=(0,t(45347).createProxy)(String.raw`/Users/shakir/Desktop/Concolabs/mb-frontend/masterbuilders-frontend/app/test/page.tsx#default`)}};var a=require("../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[379,719,564,818,438,863,867],()=>t(35377));module.exports=s})();